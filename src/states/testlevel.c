/* testlevel.c generated by valac 0.32.0, the Vala compiler
 * generated from testlevel.vala, do not modify */

/* modules: sdl2 engine gee-0.8*/
/* vapidirs: ../../engine*/

#include <glib.h>
#include <glib-object.h>
#include <engine.h>
#include <SDL2/SDL_render.h>
#include <stdlib.h>
#include <string.h>
#include <gxml/gxml.h>
#include <tiled.h>
#include <gee.h>
#include <SDL2/SDL_pixels.h>


#define TYPE_GAME_STATE (game_state_get_type ())
#define GAME_STATE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_GAME_STATE, GameState))
#define GAME_STATE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_GAME_STATE, GameStateClass))
#define IS_GAME_STATE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_GAME_STATE))
#define IS_GAME_STATE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_GAME_STATE))
#define GAME_STATE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_GAME_STATE, GameStateClass))

typedef struct _GameState GameState;
typedef struct _GameStateClass GameStateClass;
typedef struct _GameStatePrivate GameStatePrivate;

#define TYPE_TEXTURE_MANAGER (texture_manager_get_type ())
#define TEXTURE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_TEXTURE_MANAGER, TextureManager))
#define TEXTURE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_TEXTURE_MANAGER, TextureManagerClass))
#define IS_TEXTURE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_TEXTURE_MANAGER))
#define IS_TEXTURE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_TEXTURE_MANAGER))
#define TEXTURE_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_TEXTURE_MANAGER, TextureManagerClass))

typedef struct _TextureManager TextureManager;
typedef struct _TextureManagerClass TextureManagerClass;

#define TYPE_FONT_MANAGER (font_manager_get_type ())
#define FONT_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_FONT_MANAGER, FontManager))
#define FONT_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_FONT_MANAGER, FontManagerClass))
#define IS_FONT_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_FONT_MANAGER))
#define IS_FONT_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_FONT_MANAGER))
#define FONT_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_FONT_MANAGER, FontManagerClass))

typedef struct _FontManager FontManager;
typedef struct _FontManagerClass FontManagerClass;

#define TYPE_CAMERA (camera_get_type ())
#define CAMERA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CAMERA, Camera))
#define CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CAMERA, CameraClass))
#define IS_CAMERA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CAMERA))
#define IS_CAMERA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CAMERA))
#define CAMERA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CAMERA, CameraClass))

typedef struct _Camera Camera;
typedef struct _CameraClass CameraClass;

#define TYPE_TESTLEVEL (testlevel_get_type ())
#define TESTLEVEL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_TESTLEVEL, Testlevel))
#define TESTLEVEL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_TESTLEVEL, TestlevelClass))
#define IS_TESTLEVEL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_TESTLEVEL))
#define IS_TESTLEVEL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_TESTLEVEL))
#define TESTLEVEL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_TESTLEVEL, TestlevelClass))

typedef struct _Testlevel Testlevel;
typedef struct _TestlevelClass TestlevelClass;
typedef struct _TestlevelPrivate TestlevelPrivate;

#define TYPE_POSITION_COMPONENT (position_component_get_type ())
#define POSITION_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_POSITION_COMPONENT, PositionComponent))
#define POSITION_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_POSITION_COMPONENT, PositionComponentClass))
#define IS_POSITION_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_POSITION_COMPONENT))
#define IS_POSITION_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_POSITION_COMPONENT))
#define POSITION_COMPONENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_POSITION_COMPONENT, PositionComponentClass))

typedef struct _PositionComponent PositionComponent;
typedef struct _PositionComponentClass PositionComponentClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define TYPE_RENDER_COMPONENT (render_component_get_type ())
#define RENDER_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RENDER_COMPONENT, RenderComponent))
#define RENDER_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RENDER_COMPONENT, RenderComponentClass))
#define IS_RENDER_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RENDER_COMPONENT))
#define IS_RENDER_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RENDER_COMPONENT))
#define RENDER_COMPONENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RENDER_COMPONENT, RenderComponentClass))

typedef struct _RenderComponent RenderComponent;
typedef struct _RenderComponentClass RenderComponentClass;

#define TYPE_MOVEMENT_COMPONENT (movement_component_get_type ())
#define MOVEMENT_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MOVEMENT_COMPONENT, MovementComponent))
#define MOVEMENT_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MOVEMENT_COMPONENT, MovementComponentClass))
#define IS_MOVEMENT_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MOVEMENT_COMPONENT))
#define IS_MOVEMENT_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MOVEMENT_COMPONENT))
#define MOVEMENT_COMPONENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MOVEMENT_COMPONENT, MovementComponentClass))

typedef struct _MovementComponent MovementComponent;
typedef struct _MovementComponentClass MovementComponentClass;

#define TYPE_ANIMATION_COMPONENT (animation_component_get_type ())
#define ANIMATION_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ANIMATION_COMPONENT, AnimationComponent))
#define ANIMATION_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ANIMATION_COMPONENT, AnimationComponentClass))
#define IS_ANIMATION_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ANIMATION_COMPONENT))
#define IS_ANIMATION_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ANIMATION_COMPONENT))
#define ANIMATION_COMPONENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ANIMATION_COMPONENT, AnimationComponentClass))

typedef struct _AnimationComponent AnimationComponent;
typedef struct _AnimationComponentClass AnimationComponentClass;

#define TYPE_ANIMATION (animation_get_type ())
#define ANIMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ANIMATION, Animation))
#define ANIMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ANIMATION, AnimationClass))
#define IS_ANIMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ANIMATION))
#define IS_ANIMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ANIMATION))
#define ANIMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ANIMATION, AnimationClass))

typedef struct _Animation Animation;
typedef struct _AnimationClass AnimationClass;

#define TYPE_COLLISION_COMPONENT (collision_component_get_type ())
#define COLLISION_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_COLLISION_COMPONENT, CollisionComponent))
#define COLLISION_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_COLLISION_COMPONENT, CollisionComponentClass))
#define IS_COLLISION_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_COLLISION_COMPONENT))
#define IS_COLLISION_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_COLLISION_COMPONENT))
#define COLLISION_COMPONENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_COLLISION_COMPONENT, CollisionComponentClass))

typedef struct _CollisionComponent CollisionComponent;
typedef struct _CollisionComponentClass CollisionComponentClass;

#define TYPE_TILEMAP_COMPONENT2 (tilemap_component2_get_type ())
#define TILEMAP_COMPONENT2(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_TILEMAP_COMPONENT2, TilemapComponent2))
#define TILEMAP_COMPONENT2_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_TILEMAP_COMPONENT2, TilemapComponent2Class))
#define IS_TILEMAP_COMPONENT2(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_TILEMAP_COMPONENT2))
#define IS_TILEMAP_COMPONENT2_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_TILEMAP_COMPONENT2))
#define TILEMAP_COMPONENT2_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_TILEMAP_COMPONENT2, TilemapComponent2Class))

typedef struct _TilemapComponent2 TilemapComponent2;
typedef struct _TilemapComponent2Class TilemapComponent2Class;
typedef struct _TilemapComponent2Private TilemapComponent2Private;

#define TYPE_TEXT_COMPONENT (text_component_get_type ())
#define TEXT_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_TEXT_COMPONENT, TextComponent))
#define TEXT_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_TEXT_COMPONENT, TextComponentClass))
#define IS_TEXT_COMPONENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_TEXT_COMPONENT))
#define IS_TEXT_COMPONENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_TEXT_COMPONENT))
#define TEXT_COMPONENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_TEXT_COMPONENT, TextComponentClass))

typedef struct _TextComponent TextComponent;
typedef struct _TextComponentClass TextComponentClass;

struct _GameState {
	GTypeInstance parent_instance;
	volatile int ref_count;
	GameStatePrivate * priv;
	EngineEngine* engine;
	Camera* ncamera;
};

struct _GameStateClass {
	GTypeClass parent_class;
	void (*finalize) (GameState *self);
	void (*create_map) (GameState* self, EngineEntity* map);
	void (*add_entities) (GameState* self);
	void (*add_systems) (GameState* self, TextureManager* t, FontManager* f, SDL_Renderer* r);
	void (*update) (GameState* self);
};

struct _Testlevel {
	GameState parent_instance;
	TestlevelPrivate * priv;
};

struct _TestlevelClass {
	GameStateClass parent_class;
};

struct _TilemapComponent2 {
	EngineComponent parent_instance;
	TilemapComponent2Private * priv;
	TiledMap* map;
};

struct _TilemapComponent2Class {
	EngineComponentClass parent_class;
};


static gpointer testlevel_parent_class = NULL;

gpointer game_state_ref (gpointer instance);
void game_state_unref (gpointer instance);
GParamSpec* param_spec_game_state (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_game_state (GValue* value, gpointer v_object);
void value_take_game_state (GValue* value, gpointer v_object);
gpointer value_get_game_state (const GValue* value);
GType game_state_get_type (void) G_GNUC_CONST;
GType texture_manager_get_type (void) G_GNUC_CONST;
GType font_manager_get_type (void) G_GNUC_CONST;
gpointer camera_ref (gpointer instance);
void camera_unref (gpointer instance);
GParamSpec* param_spec_camera (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_camera (GValue* value, gpointer v_object);
void value_take_camera (GValue* value, gpointer v_object);
gpointer value_get_camera (const GValue* value);
GType camera_get_type (void) G_GNUC_CONST;
GType testlevel_get_type (void) G_GNUC_CONST;
enum  {
	TESTLEVEL_DUMMY_PROPERTY
};
Testlevel* testlevel_new (TextureManager* textureManager, FontManager* fontManager, SDL_Renderer* renderer);
Testlevel* testlevel_construct (GType object_type, TextureManager* textureManager, FontManager* fontManager, SDL_Renderer* renderer);
GameState* game_state_construct (GType object_type, const gchar* map_filename, TextureManager* t, FontManager* f, SDL_Renderer* r);
static void testlevel_real_add_entities (GameState* base);
void game_state_add_entities (GameState* self);
PositionComponent* position_component_new (gint x, gint y);
PositionComponent* position_component_construct (GType object_type, gint x, gint y);
GType position_component_get_type (void) G_GNUC_CONST;
RenderComponent* render_component_new (const gchar* identifier, const gchar* sprite_filename, guint w, guint h);
RenderComponent* render_component_construct (GType object_type, const gchar* identifier, const gchar* sprite_filename, guint w, guint h);
GType render_component_get_type (void) G_GNUC_CONST;
MovementComponent* movement_component_new (void);
MovementComponent* movement_component_construct (GType object_type);
GType movement_component_get_type (void) G_GNUC_CONST;
GType animation_component_get_type (void) G_GNUC_CONST;
AnimationComponent* animation_component_new (void);
AnimationComponent* animation_component_construct (GType object_type);
GType animation_get_type (void) G_GNUC_CONST;
void animation_component_add_animation (AnimationComponent* self, Animation* a);
Animation* animation_new (const gchar* name, gint begin, gint end, gint frames_between, gboolean endless, gboolean removeAfterAnimation);
Animation* animation_construct (GType object_type, const gchar* name, gint begin, gint end, gint frames_between, gboolean endless, gboolean removeAfterAnimation);
CollisionComponent* collision_component_new (gint x, gint y, guint w, guint h);
CollisionComponent* collision_component_construct (GType object_type, gint x, gint y, guint w, guint h);
GType collision_component_get_type (void) G_GNUC_CONST;
static void testlevel_real_create_map (GameState* base, EngineEntity* mapentity);
GType tilemap_component2_get_type (void) G_GNUC_CONST;
TextComponent* text_component_new (const gchar* font, const gchar* text, SDL_Color color);
TextComponent* text_component_construct (GType object_type, const gchar* font, const gchar* text, SDL_Color color);
GType text_component_get_type (void) G_GNUC_CONST;


Testlevel* testlevel_construct (GType object_type, TextureManager* textureManager, FontManager* fontManager, SDL_Renderer* renderer) {
	Testlevel* self = NULL;
	TextureManager* _tmp0_ = NULL;
	FontManager* _tmp1_ = NULL;
	SDL_Renderer* _tmp2_ = NULL;
	g_return_val_if_fail (textureManager != NULL, NULL);
	g_return_val_if_fail (fontManager != NULL, NULL);
	g_return_val_if_fail (renderer != NULL, NULL);
	_tmp0_ = textureManager;
	_tmp1_ = fontManager;
	_tmp2_ = renderer;
	self = (Testlevel*) game_state_construct (object_type, "data/testmap.tmx", _tmp0_, _tmp1_, _tmp2_);
	return self;
}


Testlevel* testlevel_new (TextureManager* textureManager, FontManager* fontManager, SDL_Renderer* renderer) {
	return testlevel_construct (TYPE_TESTLEVEL, textureManager, fontManager, renderer);
}


static void testlevel_real_add_entities (GameState* base) {
	Testlevel * self;
	EngineEntity* e = NULL;
	EngineEngine* _tmp0_ = NULL;
	EngineEntity* _tmp1_ = NULL;
	PositionComponent* _tmp2_ = NULL;
	PositionComponent* _tmp3_ = NULL;
	RenderComponent* _tmp4_ = NULL;
	RenderComponent* _tmp5_ = NULL;
	MovementComponent* _tmp6_ = NULL;
	MovementComponent* _tmp7_ = NULL;
	AnimationComponent* ani = NULL;
	AnimationComponent* _tmp8_ = NULL;
	Animation* _tmp9_ = NULL;
	Animation* _tmp10_ = NULL;
	Animation* _tmp11_ = NULL;
	Animation* _tmp12_ = NULL;
	CollisionComponent* _tmp13_ = NULL;
	CollisionComponent* _tmp14_ = NULL;
	self = (Testlevel*) base;
	GAME_STATE_CLASS (testlevel_parent_class)->add_entities (G_TYPE_CHECK_INSTANCE_CAST (self, TYPE_GAME_STATE, GameState));
	_tmp0_ = ((GameState*) self)->engine;
	_tmp1_ = engine_engine_createEntity (_tmp0_);
	e = _tmp1_;
	_tmp2_ = position_component_new (10, 10);
	_tmp3_ = _tmp2_;
	engine_entity_add_component (e, (EngineComponent*) _tmp3_);
	_g_object_unref0 (_tmp3_);
	_tmp4_ = render_component_new ("player", "data/yvonne.png", (guint) 30, (guint) 17);
	_tmp5_ = _tmp4_;
	engine_entity_add_component (e, (EngineComponent*) _tmp5_);
	_g_object_unref0 (_tmp5_);
	_tmp6_ = movement_component_new ();
	_tmp7_ = _tmp6_;
	engine_entity_add_component (e, (EngineComponent*) _tmp7_);
	_g_object_unref0 (_tmp7_);
	_tmp8_ = animation_component_new ();
	ani = _tmp8_;
	_tmp9_ = animation_new ("still", 0, 3, 3, TRUE, FALSE);
	_tmp10_ = _tmp9_;
	animation_component_add_animation (ani, _tmp10_);
	_g_object_unref0 (_tmp10_);
	_tmp11_ = animation_new ("running", 4, 6, 3, TRUE, FALSE);
	_tmp12_ = _tmp11_;
	animation_component_add_animation (ani, _tmp12_);
	_g_object_unref0 (_tmp12_);
	engine_entity_add_component (e, (EngineComponent*) ani);
	_tmp13_ = collision_component_new (11, 5, (guint) 8, (guint) 12);
	_tmp14_ = _tmp13_;
	engine_entity_add_component (e, (EngineComponent*) _tmp14_);
	_g_object_unref0 (_tmp14_);
	_g_object_unref0 (ani);
	_g_object_unref0 (e);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void testlevel_real_create_map (GameState* base, EngineEntity* mapentity) {
	Testlevel * self;
	TilemapComponent2* map = NULL;
	EngineEntity* _tmp0_ = NULL;
	gpointer _tmp1_ = NULL;
	self = (Testlevel*) base;
	g_return_if_fail (mapentity != NULL);
	_tmp0_ = mapentity;
	_tmp1_ = engine_entity_get_component (_tmp0_, TYPE_TILEMAP_COMPONENT2, (GBoxedCopyFunc) g_object_ref, g_object_unref);
	map = (TilemapComponent2*) _tmp1_;
	{
		GXmlSerializableArrayList* _objgrp_list = NULL;
		TilemapComponent2* _tmp2_ = NULL;
		TiledMap* _tmp3_ = NULL;
		GXmlSerializableArrayList* _tmp4_ = NULL;
		GXmlSerializableArrayList* _tmp5_ = NULL;
		GXmlSerializableArrayList* _tmp6_ = NULL;
		gint _objgrp_size = 0;
		GXmlSerializableArrayList* _tmp7_ = NULL;
		gint _tmp8_ = 0;
		gint _tmp9_ = 0;
		gint _objgrp_index = 0;
		_tmp2_ = map;
		_tmp3_ = _tmp2_->map;
		_tmp4_ = tiled_map_get_objectgroup (_tmp3_);
		_tmp5_ = _tmp4_;
		_tmp6_ = _g_object_ref0 (_tmp5_);
		_objgrp_list = _tmp6_;
		_tmp7_ = _objgrp_list;
		_tmp8_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp7_);
		_tmp9_ = _tmp8_;
		_objgrp_size = _tmp9_;
		_objgrp_index = -1;
		while (TRUE) {
			gint _tmp10_ = 0;
			gint _tmp11_ = 0;
			gint _tmp12_ = 0;
			TiledObjectgroup* objgrp = NULL;
			GXmlSerializableArrayList* _tmp13_ = NULL;
			gint _tmp14_ = 0;
			gpointer _tmp15_ = NULL;
			TiledObjectgroup* _tmp16_ = NULL;
			const gchar* _tmp17_ = NULL;
			const gchar* _tmp18_ = NULL;
			_tmp10_ = _objgrp_index;
			_objgrp_index = _tmp10_ + 1;
			_tmp11_ = _objgrp_index;
			_tmp12_ = _objgrp_size;
			if (!(_tmp11_ < _tmp12_)) {
				break;
			}
			_tmp13_ = _objgrp_list;
			_tmp14_ = _objgrp_index;
			_tmp15_ = gee_abstract_list_get ((GeeAbstractList*) _tmp13_, _tmp14_);
			objgrp = (TiledObjectgroup*) _tmp15_;
			_tmp16_ = objgrp;
			_tmp17_ = tiled_objectgroup_get_name (_tmp16_);
			_tmp18_ = _tmp17_;
			if (g_strcmp0 (_tmp18_, "qboxes") == 0) {
				{
					GXmlSerializableArrayList* _o_list = NULL;
					TiledObjectgroup* _tmp19_ = NULL;
					GXmlSerializableArrayList* _tmp20_ = NULL;
					GXmlSerializableArrayList* _tmp21_ = NULL;
					GXmlSerializableArrayList* _tmp22_ = NULL;
					gint _o_size = 0;
					GXmlSerializableArrayList* _tmp23_ = NULL;
					gint _tmp24_ = 0;
					gint _tmp25_ = 0;
					gint _o_index = 0;
					_tmp19_ = objgrp;
					_tmp20_ = tiled_objectgroup_get_objects (_tmp19_);
					_tmp21_ = _tmp20_;
					_tmp22_ = _g_object_ref0 (_tmp21_);
					_o_list = _tmp22_;
					_tmp23_ = _o_list;
					_tmp24_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp23_);
					_tmp25_ = _tmp24_;
					_o_size = _tmp25_;
					_o_index = -1;
					while (TRUE) {
						gint _tmp26_ = 0;
						gint _tmp27_ = 0;
						gint _tmp28_ = 0;
						TiledObject* o = NULL;
						GXmlSerializableArrayList* _tmp29_ = NULL;
						gint _tmp30_ = 0;
						gpointer _tmp31_ = NULL;
						EngineEntity* e = NULL;
						EngineEngine* _tmp32_ = NULL;
						EngineEntity* _tmp33_ = NULL;
						EngineEntity* _tmp34_ = NULL;
						TiledObject* _tmp35_ = NULL;
						gdouble _tmp36_ = 0.0;
						gdouble _tmp37_ = 0.0;
						TiledObject* _tmp38_ = NULL;
						gdouble _tmp39_ = 0.0;
						gdouble _tmp40_ = 0.0;
						PositionComponent* _tmp41_ = NULL;
						PositionComponent* _tmp42_ = NULL;
						EngineEntity* _tmp43_ = NULL;
						RenderComponent* _tmp44_ = NULL;
						RenderComponent* _tmp45_ = NULL;
						EngineEntity* _tmp46_ = NULL;
						CollisionComponent* _tmp47_ = NULL;
						CollisionComponent* _tmp48_ = NULL;
						AnimationComponent* ani = NULL;
						AnimationComponent* _tmp73_ = NULL;
						AnimationComponent* _tmp74_ = NULL;
						Animation* _tmp75_ = NULL;
						Animation* _tmp76_ = NULL;
						AnimationComponent* _tmp77_ = NULL;
						Animation* _tmp78_ = NULL;
						Animation* _tmp79_ = NULL;
						EngineEntity* _tmp80_ = NULL;
						AnimationComponent* _tmp81_ = NULL;
						_tmp26_ = _o_index;
						_o_index = _tmp26_ + 1;
						_tmp27_ = _o_index;
						_tmp28_ = _o_size;
						if (!(_tmp27_ < _tmp28_)) {
							break;
						}
						_tmp29_ = _o_list;
						_tmp30_ = _o_index;
						_tmp31_ = gee_abstract_list_get ((GeeAbstractList*) _tmp29_, _tmp30_);
						o = (TiledObject*) _tmp31_;
						_tmp32_ = ((GameState*) self)->engine;
						_tmp33_ = engine_engine_createEntity (_tmp32_);
						e = _tmp33_;
						_tmp34_ = e;
						_tmp35_ = o;
						_tmp36_ = tiled_object_get_x (_tmp35_);
						_tmp37_ = _tmp36_;
						_tmp38_ = o;
						_tmp39_ = tiled_object_get_y (_tmp38_);
						_tmp40_ = _tmp39_;
						_tmp41_ = position_component_new ((gint) _tmp37_, (gint) _tmp40_);
						_tmp42_ = _tmp41_;
						engine_entity_add_component (_tmp34_, (EngineComponent*) _tmp42_);
						_g_object_unref0 (_tmp42_);
						_tmp43_ = e;
						_tmp44_ = render_component_new ("qbox", "data/qbox-sheet.png", (guint) 12, (guint) 14);
						_tmp45_ = _tmp44_;
						engine_entity_add_component (_tmp43_, (EngineComponent*) _tmp45_);
						_g_object_unref0 (_tmp45_);
						_tmp46_ = e;
						_tmp47_ = collision_component_new (0, 2, (guint) 12, (guint) 12);
						_tmp48_ = _tmp47_;
						engine_entity_add_component (_tmp46_, (EngineComponent*) _tmp48_);
						_g_object_unref0 (_tmp48_);
						{
							GXmlSerializableArrayList* _p_list = NULL;
							TiledObject* _tmp49_ = NULL;
							TiledProperties* _tmp50_ = NULL;
							TiledProperties* _tmp51_ = NULL;
							GXmlSerializableArrayList* _tmp52_ = NULL;
							GXmlSerializableArrayList* _tmp53_ = NULL;
							GXmlSerializableArrayList* _tmp54_ = NULL;
							gint _p_size = 0;
							GXmlSerializableArrayList* _tmp55_ = NULL;
							gint _tmp56_ = 0;
							gint _tmp57_ = 0;
							gint _p_index = 0;
							_tmp49_ = o;
							_tmp50_ = tiled_object_get_properties (_tmp49_);
							_tmp51_ = _tmp50_;
							_tmp52_ = tiled_properties_get_properties (_tmp51_);
							_tmp53_ = _tmp52_;
							_tmp54_ = _g_object_ref0 (_tmp53_);
							_p_list = _tmp54_;
							_tmp55_ = _p_list;
							_tmp56_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp55_);
							_tmp57_ = _tmp56_;
							_p_size = _tmp57_;
							_p_index = -1;
							while (TRUE) {
								gint _tmp58_ = 0;
								gint _tmp59_ = 0;
								gint _tmp60_ = 0;
								TiledProperty* p = NULL;
								GXmlSerializableArrayList* _tmp61_ = NULL;
								gint _tmp62_ = 0;
								gpointer _tmp63_ = NULL;
								TiledProperty* _tmp64_ = NULL;
								const gchar* _tmp65_ = NULL;
								const gchar* _tmp66_ = NULL;
								_tmp58_ = _p_index;
								_p_index = _tmp58_ + 1;
								_tmp59_ = _p_index;
								_tmp60_ = _p_size;
								if (!(_tmp59_ < _tmp60_)) {
									break;
								}
								_tmp61_ = _p_list;
								_tmp62_ = _p_index;
								_tmp63_ = gee_abstract_list_get ((GeeAbstractList*) _tmp61_, _tmp62_);
								p = (TiledProperty*) _tmp63_;
								_tmp64_ = p;
								_tmp65_ = tiled_property_get_name (_tmp64_);
								_tmp66_ = _tmp65_;
								if (g_strcmp0 (_tmp66_, "text") == 0) {
									EngineEntity* _tmp67_ = NULL;
									TiledProperty* _tmp68_ = NULL;
									const gchar* _tmp69_ = NULL;
									const gchar* _tmp70_ = NULL;
									TextComponent* _tmp71_ = NULL;
									TextComponent* _tmp72_ = NULL;
									_tmp67_ = e;
									_tmp68_ = p;
									_tmp69_ = tiled_property_get_value (_tmp68_);
									_tmp70_ = _tmp69_;
									_tmp71_ = text_component_new ("defaultfont", _tmp70_, ENGINE_COLOR_BLACK);
									_tmp72_ = _tmp71_;
									engine_entity_add_component (_tmp67_, (EngineComponent*) _tmp72_);
									_g_object_unref0 (_tmp72_);
								}
								_g_object_unref0 (p);
							}
							_g_object_unref0 (_p_list);
						}
						_tmp73_ = animation_component_new ();
						ani = _tmp73_;
						_tmp74_ = ani;
						_tmp75_ = animation_new ("still", 0, 0, 1, FALSE, FALSE);
						_tmp76_ = _tmp75_;
						animation_component_add_animation (_tmp74_, _tmp76_);
						_g_object_unref0 (_tmp76_);
						_tmp77_ = ani;
						_tmp78_ = animation_new ("touched", 0, 4, 1, FALSE, FALSE);
						_tmp79_ = _tmp78_;
						animation_component_add_animation (_tmp77_, _tmp79_);
						_g_object_unref0 (_tmp79_);
						_tmp80_ = e;
						_tmp81_ = ani;
						engine_entity_add_component (_tmp80_, (EngineComponent*) _tmp81_);
						_g_object_unref0 (ani);
						_g_object_unref0 (e);
						_g_object_unref0 (o);
					}
					_g_object_unref0 (_o_list);
				}
			}
			_g_object_unref0 (objgrp);
		}
		_g_object_unref0 (_objgrp_list);
	}
	_g_object_unref0 (map);
}


static void testlevel_class_init (TestlevelClass * klass) {
	testlevel_parent_class = g_type_class_peek_parent (klass);
	((GameStateClass *) klass)->add_entities = testlevel_real_add_entities;
	((GameStateClass *) klass)->create_map = testlevel_real_create_map;
}


static void testlevel_instance_init (Testlevel * self) {
}


GType testlevel_get_type (void) {
	static volatile gsize testlevel_type_id__volatile = 0;
	if (g_once_init_enter (&testlevel_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (TestlevelClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) testlevel_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (Testlevel), 0, (GInstanceInitFunc) testlevel_instance_init, NULL };
		GType testlevel_type_id;
		testlevel_type_id = g_type_register_static (TYPE_GAME_STATE, "Testlevel", &g_define_type_info, 0);
		g_once_init_leave (&testlevel_type_id__volatile, testlevel_type_id);
	}
	return testlevel_type_id__volatile;
}



